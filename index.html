<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ankith's Premium Weather Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code&display=swap" rel="stylesheet">
  <style>
    /* --- Global Styles --- */
    body {
      margin: 0;
      font-family: 'Fira Code', monospace;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: linear-gradient(135deg, #0b0c10, #1f1f1f);
      overflow: hidden;
      color: #00FF00;
      transition: background 1s ease;
    }

    /* --- Background Animation Layer --- */
    .bg {
      position: absolute;
      top:0; left:0;
      width:100%; height:100%;
      z-index:0;
      opacity:0.2;
    }

    /* --- Dashboard Card --- */
    .dashboard {
      position: relative;
      z-index:1;
      background: rgba(0,0,0,0.7);
      border-radius: 25px;
      padding: 50px 60px;
      text-align: center;
      box-shadow: 0 0 30px #00FF00;
      max-width: 450px;
      width: 90%;
      backdrop-filter: blur(8px);
      overflow: hidden;
    }

    /* --- Typing Intro --- */
    .intro {
      font-size: 1.5rem;
      margin-bottom: 20px;
      min-height: 40px;
    }

    /* --- Weather Icon --- */
    #weather-icon {
      width: 100px;
      height: 100px;
    }

    /* --- Weather Effects --- */
    .raindrop {
      position: absolute;
      top: -10px;
      width: 2px;
      height: 10px;
      background: #00BFFF;
      opacity: 0.7;
      animation: fall linear infinite;
    }

    @keyframes fall {
      to { transform: translateY(500px); opacity: 0; }
    }

    .cloud {
      position: absolute;
      width: 60px;
      height: 40px;
      background: #888;
      border-radius: 50%;
      opacity: 0.7;
      animation: float linear infinite;
    }

    @keyframes float {
      0% { transform: translateX(-100px); }
      100% { transform: translateX(500px); }
    }

    /* --- Social Links --- */
    .socials {
      margin-top: 20px;
    }

    .socials a {
      margin: 0 10px;
      color: #00FF00;
      text-decoration: none;
      transition: transform 0.3s, color 0.3s;
    }

    .socials a:hover {
      transform: scale(1.2);
      color: #ffffff;
    }

    /* --- Loader --- */
    .loader {
      border: 4px solid #00FF00;
      border-top: 4px solid transparent;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      margin: 20px auto;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="bg" id="bg"></div>

  <div class="dashboard" id="dashboard">
    <div class="intro" id="typing"></div>
    <div id="weather">
      <div class="loader"></div>
    </div>
    <div class="socials">
      <a href="https://www.linkedin.com/in/ankithva" target="_blank">LinkedIn</a>
      <a href="https://github.com/ankithva" target="_blank">GitHub</a>
      <a href="https://twitter.com/ankithva" target="_blank">Twitter</a>
    </div>
  </div>

  <script>
    const apiKey = "4b17183372e32d80f601432c06223f7f";

    // --- Typing Effect ---
    const introText = "Hi, I'm Ankith, a weather enthusiast from India üå§Ô∏è";
    let i = 0;
    function typeWriter() {
      if(i < introText.length) {
        document.getElementById("typing").innerHTML += introText.charAt(i);
        i++;
        setTimeout(typeWriter, 80);
      }
    }
    typeWriter();

    // --- Weather Display ---
    function displayWeather(data) {
      const icon = `http://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;
      const condition = data.weather[0].main.toLowerCase();
      document.getElementById("weather").innerHTML =
        `<h2>${data.name}, ${data.sys.country}</h2>
         <img id="weather-icon" src="${icon}" alt="Weather icon"/>
         <p>${data.weather[0].main}</p>
         <p>üå°Ô∏è Temp: ${data.main.temp}¬∞C</p>
         <p>üíß Humidity: ${data.main.humidity}%</p>
         <p>üå¨Ô∏è Wind: ${data.wind.speed} m/s</p>`;

      applyWeatherEffects(condition);
    }

    function fetchFallback() {
      fetch(`https://api.openweathermap.org/data/2.5/weather?q=New Delhi&units=metric&appid=${apiKey}`)
        .then(res => res.json())
        .then(displayWeather)
        .catch(() => {
          document.getElementById("weather").innerHTML = "<p>Unable to fetch weather.</p>";
        });
    }

    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        function(position) {
          const lat = position.coords.latitude;
          const lon = position.coords.longitude;
          fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${apiKey}`)
            .then(res => res.json())
            .then(displayWeather)
            .catch(fetchFallback);
        },
        fetchFallback
      );
    } else {
      fetchFallback();
    }

    // --- Weather Effects ---
    function applyWeatherEffects(condition) {
      const dashboard = document.getElementById('dashboard');
      document.querySelectorAll('.raindrop, .cloud').forEach(e => e.remove());

      // Reset glow
      dashboard.style.boxShadow = '0 0 30px #00FF00';
      document.body.style.background = 'linear-gradient(135deg, #0b0c10, #1f1f1f)';

      if(condition.includes('rain')) {
        dashboard.style.boxShadow = '0 0 40px #1E90FF';
        document.body.style.background = 'linear-gradient(135deg, #0b0c10, #00008B)';

        // Add raindrops
        for(let i=0;i<50;i++){
          const drop = document.createElement('div');
          drop.className='raindrop';
          drop.style.left=Math.random()*100+'%';
          drop.style.animationDuration=0.5+Math.random()*1+'s';
          dashboard.appendChild(drop);
        }
      } else if(condition.includes('cloud')) {
        dashboard.style.boxShadow = '0 0 40px #888888';
        document.body.style.background = 'linear-gradient(135deg, #2f2f2f, #555555)';

        // Add clouds
        for(let i=0;i<5;i++){
          const cloud = document.createElement('div');
          cloud.className='cloud';
          cloud.style.top=Math.random()*30+'px';
          cloud.style.left=-100-i*100+'px';
          cloud.style.animationDuration=5+Math.random()*5+'s';
          dashboard.appendChild(cloud);
        }
      } else if(condition.includes('clear') || condition.includes('sun')) {
        dashboard.style.boxShadow = '0 0 40px #FFD700';
        document.body.style.background = 'linear-gradient(135deg, #1f1f1f, #333300)';
      } else {
        dashboard.style.boxShadow = '0 0 30px #00FF00';
        document.body.style.background = 'linear-gradient(135deg, #0b0c10, #1f1f1f)';
      }
    }
  </script>
</body>
</html>
